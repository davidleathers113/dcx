# DCX Production Environment Variables Template
# Copy this file and fill in the values for your production deployment

# =============================================================================
# BACKEND ENVIRONMENT VARIABLES (Railway/Render/Fly.io)
# =============================================================================

# PostgreSQL connection string
# Get this from your database provider (Railway, Supabase, Neon, etc.)
DATABASE_URL="postgresql://username:password@host:5432/database_name"

# Admin API authentication key - used to protect /api/* routes
# Generate with: openssl rand -base64 32
ADMIN_API_KEY="REPLACE_WITH_SECURE_RANDOM_KEY"

# Twilio authentication token for webhook signature validation
# Get this from: https://console.twilio.com/
TWILIO_AUTH_TOKEN="your_twilio_auth_token_here"

# Server configuration
PORT=4000
NODE_ENV=production

# =============================================================================
# FRONTEND ENVIRONMENT VARIABLES (Netlify)
# =============================================================================

# Backend API URL - must include protocol (https://) and no trailing slash
# Example: https://dcx-backend.railway.app
NEXT_PUBLIC_API_BASE_URL="https://your-backend-url-here.com"

# Admin API key - must match the ADMIN_API_KEY from backend
# This is sent in the Authorization header for API requests
NEXT_PUBLIC_ADMIN_API_KEY="SAME_AS_BACKEND_ADMIN_API_KEY"

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================

# Backend (Railway/Render/Fly.io):
# [ ] Set DATABASE_URL
# [ ] Set ADMIN_API_KEY (generate new one)
# [ ] Set TWILIO_AUTH_TOKEN
# [ ] Set NODE_ENV=production
# [ ] Run: npx prisma migrate deploy
# [ ] Run: npx prisma generate
# [ ] Test health endpoint: curl https://your-backend-url.com/health

# Frontend (Netlify):
# [ ] Set NEXT_PUBLIC_API_BASE_URL (backend URL)
# [ ] Set NEXT_PUBLIC_ADMIN_API_KEY (same as backend)
# [ ] Deploy site
# [ ] Test in browser, check console for errors

# Backend CORS Update:
# [ ] Edit /backend/src/server.ts
# [ ] Add Netlify URL to CORS origin array
# [ ] Redeploy backend

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. NEVER commit this file with real values to git
# 2. Use different ADMIN_API_KEY for production than development
# 3. Rotate keys regularly (every 90 days recommended)
# 4. Use managed database services with automatic backups
# 5. Enable SSL/TLS on all endpoints (Railway/Render/Netlify provide this free)
# 6. Set up monitoring and alerting (Sentry, Uptime Robot, etc.)

# =============================================================================
# OPTIONAL: ADDITIONAL SERVICES
# =============================================================================

# Sentry (Error Tracking)
# SENTRY_DSN="https://...@sentry.io/..."

# LogRocket (Session Replay)
# NEXT_PUBLIC_LOGROCKET_APP_ID="your-app-id/project-name"

# Google Analytics
# NEXT_PUBLIC_GA_TRACKING_ID="G-XXXXXXXXXX"
